# Webhook Daemon Configuration for Separated Repositories
#
# Two processing modes are supported:
#   - Relay mode: Push transcript to repo, trigger GitHub Actions workflow
#   - Standalone mode: Process transcripts locally, push results
#
# Enable ONE of: github.workflow_dispatch OR processing.standalone

# HTTP Server Settings
server:
  host: 127.0.0.1
  port: 9876

# Directory Settings
# Path to the data repository (meeting-notes)
data_repo: ../meeting-notes

# Git Settings
git:
  auto_commit: true
  auto_push: true
  repository_url: "github.com/ewilderj/meeting-notes.git"  # Data repository URL
  commit_message_template: "Add transcript: {title}"
  branch: main
  remote: origin

# Phase 5: Always-on agent/daemon options
# If the data repo directory doesn't exist yet, it is cloned automatically.

# Keep the local data repo up to date.
sync:
  enabled: true
  on_startup: true
  before_accepting_webhooks: true
  poll_interval_seconds: 1800
  ff_only: true

# RELAY MODE: trigger a workflow_dispatch in the data repo for cloud processing.
# Disable this if using standalone mode.
github:
  workflow_dispatch:
    enabled: true
    repo: "ewilderj/meeting-notes"
    workflow: "process-transcripts.yml"
    ref: "main"
    inputs: {}

# STANDALONE MODE: process transcripts locally instead of using GitHub Actions.
# Enable this and disable workflow_dispatch above for local processing.
processing:
  standalone:
    enabled: false
    command: "uv run run_summarization.py --git"
    working_directory: "."  # Relative to processor repo, or absolute path
    timeout_seconds: 300

# Optional: run a command when `git pull` brings in new commits.
hooks:
  on_new_commits:
    enabled: false
    command: "touch /tmp/ISEEIT"
    working_directory: "."
    timeout_seconds: 600
